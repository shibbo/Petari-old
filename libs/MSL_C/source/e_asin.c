#include <cmath>

double __ieee754_asin(double x) {
    double t, w, p, q, c, r, s;
    int hx, ix;

    hx = *(int *)&x;
    ix = hx & 0x7FFFFFFF;

    if (ix >= 0x3FF00000) {
        if (((ix - 0x3ff00000) | *(1 + (int*)&x)) == 0) {
            return x * 1.57079632679489655800e+00 + x * 6.12323399573676603587e-17;
        }

        return NAN;
    }
    else if (ix < 0x3FE00000) {
        if (ix < 0x3E400000) {
            if (1.000e+300 + x > 1.00000000000000000000e+00) {
                return x;
            }
        }
        else {
            t = x * x;
            p = t * (1.66666666666666657415e-01 + t * (-3.25565818622400915405e-01 + t * (2.01212532134862925881e-01 + t * (-4.00555345006794114027e-02 + t * (7.91534994289814532176e-04 + t * 3.47933107596021167570e-05)))));
            q = 1.00000000000000000000e+00 + t * (-2.40339491173441421878e+00 + t * (2.02094576023350569471e+00 + t * (-6.88283971605453293030e-01 + t * 7.70381505559019352791e-02)));
            w = p / q;
            return x + x * w;
        }
    }

    w = 1.00000000000000000000e+00 - __fabs(x);
    t = w * 0.5;
    p = t * (1.66666666666666657415e-01 + t * (-3.25565818622400915405e-01 + t * (2.01212532134862925881e-01 + t * (-4.00555345006794114027e-02 + t * (7.91534994289814532176e-04 + t * 3.47933107596021167570e-05)))));
    q = 1.00000000000000000000e+00 + t * (-2.40339491173441421878e+00 + t * (2.02094576023350569471e+00 + t * (-6.88283971605453293030e-01 + t * 7.70381505559019352791e-02)));
    s = sqrt(t);

    if (ix >= 0x3FEF3333) {
        w = p / q;
        t = 1.57079632679489655800e+00 - (2.0*(s + s * w) -6.12323399573676603587e-17);
    }
    else {
        w = s;
        *(1 + (int*)&w) = 0;
        c = (t - w * w) / (s + w);
        r = p / q;
        p = 2.0 * s * r - (6.12323399573676603587e-17 - 2.0 * c);
        q = 7.85398163397448278999e-01-2.0 * w;
        t = 7.85398163397448278999e-01 - (p - q);
    }
    
    if (hx > 0) {
        return t;
    }

    return -t;
}